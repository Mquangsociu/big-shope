@model IEnumerable<BigShope.Models.Product>
@{
    ViewData["Title"] = "Products";
}

<div class="container">
    <div class="women-product">
        <div class=" w_content">
            <div class="women">
                @if (ViewBag.CurrentCategory != null)
                {
                    <a href="#"><h4>@ViewBag.CurrentCategory.Name - <span>@Model.Count() items</span></h4></a>
                }
                else
                {
                    <a href="#"><h4>All Products - <span>@Model.Count() items</span></h4></a>
                }
                <ul class="w_nav">
                    <li>Sort : </li>
                    <li><a class="active" href="#">popular</a></li> |
                    <li><a href="#">new</a></li> |
                    <li><a href="#">discount</a></li> |
                    <li><a href="#">price: Low High</a></li> 
                    <div class="clearfix"> </div>	
                </ul>
                <div class="clearfix"> </div>	
            </div>
        </div>
        <!-- grids_of_4 -->
        <div class="grid-product">
            @foreach (var product in Model)
            {
                <div class="  product-grid">
                    <div class="content_box">
                        <a asp-action="Details" asp-route-id="@product.ProductId">
                            <div class="left-grid-view grid-view-left">
                                <img src="@(string.IsNullOrEmpty(product.ImageUrl) ? "~/images/pic13.jpg" : product.ImageUrl)" class="img-responsive watch-right" alt="@product.Name" />
                                <div class="mask">
                                    <div class="info">Quick View</div>
                                </div>
                            </div>
                        </a>
                        <h4><a asp-action="Details" asp-route-id="@product.ProductId">@product.Name</a></h4>
                        <p>@(product.Description != null && product.Description.Length > 50 ? product.Description.Substring(0, 50) : product.Description ?? "")</p>
                        @if (product.PromotionalPrice.HasValue)
                        {
                            <text>Rs. @product.PromotionalPrice</text>
                        }
                        else
                        {
                            <text>Rs. @product.Price</text>
                        }
                        <form method="post" asp-controller="Cart" asp-action="AddToCart" style="margin-top:8px;">
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="productId" value="@product.ProductId" />
                            <input type="hidden" name="quantity" value="1" />
                            <button type="submit" class="btn btn-sm btn-primary">Add to Cart</button>
                        </form>
                    </div>
                </div>
            }
            <div class="clearfix"> </div>
        </div>
    </div>
</div>
